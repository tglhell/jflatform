<!doctype html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  <title>BMS 2.0</title>

  <link rel="stylesheet" href="../../assets/css/common.css">
  <link rel="shortcut icon" href="../../assets/images/favicon.png" type="image/x-icon">
  <link rel="stylesheet" href="../../assets/css/lib/jquery-ui.css">
  <link rel="stylesheet" href="../../assets/css/lib/customlib.css">
  <link rel="stylesheet" href="../../assets/css/style.css">
  <link rel="stylesheet" href="../../assets/css/design-review.css">
  <style>
    .cont-outer > p, .cont-outer.fullcase, .cont-center, .cont-right > p {height:100px; background-color: rgb(205, 206, 182);}
    .cont-outer {margin-bottom: 20px !important}
    .test .bms-container .bms-content .cont-outer.fullcase {
      background-color: #f4f4f4;
    }
  </style>

  <script type="text/javascript" src="../../assets/js/lib/common-lib.js"></script>
  <script type="text/javascript" src="../../assets/js/lib/variable.js"></script>
  <script type="text/javascript" src="../../assets/js/common.js"></script>
  <script type="text/javascript" src="../../assets/js/lib/customlib.js"></script>
</head>

<body>

<div class="bms-wrap">
  <div class="skip-nav">
    <a href="#bmsContainer"><span>컨텐츠 바로가기</span></a>
  </div>

  <!-- header -->
  <div class="bms-header">
    <img src="../../assets/images/temp/@header.png" alt="">
  </div>
  <!--//header -->

  <!-- container -->
  <div id="bmsContainer" class="bms-container">
    <div class="bms-content">
      <!-- S: 20220531 cont-outer 분리(breadclumb-outer 포함)︎ -->
      <div class="cont-outer">
        <div class="breadclumb-outer">
          <a class="breadclumb"><span>HOME</span></a>
          <a class="breadclumb"><span>Design Review</span></a>
          <a class="breadclumb"><span>New Design Submission</span></a>
          <a class="breadclumb regular"><span>Text</span></a>
        </div>
      </div>
      <!-- E: 20220531 cont-outer 분리(breadclumb-outer 포함)︎ -->

      <!-- S: 20220531 cont-outer 분리(form 포함)︎ -->
      <div class="cont-outer form">
        <!-- S: [forward_file] -->
        <div class="design-review-wrap"><!-- 별도 css 분리시 해당 파트 클래스 네이밍 부여 -->
          <div class="complete-outer">
            <div class="complete-area">
              <p class="tit">디자인 리뷰 요청 완료​</p>
              <p class="desc">작성해주신 리뷰 내용이 담당자에게 전달되었습니다.​<br>담당자 검토 후 피드백을 전달 드릴 예정입니다.​<br>파일을 제출한 날로부터 영업일 3일 안으로 피드백은 업로드됩니다.​</p>
            </div>
          </div>
        </div>
        <!-- E: [forward_file] -->
      </div>
      <!-- E: 20220531 cont-outer 분리(form 포함)︎ -->
    </div>
  </div>
  <!--//container -->

  <!-- footer -->
  <div class="bms-footer">
    <img src="../../assets/images/temp/@footer.png" alt="">
  </div>
  <!--//footer -->

  <div class="btn-top-box">
    <button title="move to top" role="button" class="btn-top">
      <span>top</span>
    </button>
  </div>
</div>

</body>

<script>
	function designReview () {
		const swtParent = $('.js-switch-outer');
		$('.js-switch').on('click', function () {
			$(this).closest(swtParent).toggleClass('active');
			chkLeng ($(this));
		}); 
		$('.switch-btm-box .chk').on('click', 'input', function () {
			const thisTxt = $(this).parent().find('span').text();
			$(this).parent().toggleClass('on');
			chkLeng ($(this));
			if ($(this).parent().hasClass('on')) {
				const titIdx = $(this).closest('.check-box').index();
				const titSwtTxt = $(this).closest('.check-box').find('>label').text();
				const chkItemIdx = $(this).parent().index();
				const chkSwtTxt = $(this).parent().find('span').text();
				$(this).closest(swtParent).find('ul').prepend('<li data-label="' + chkSwtTxt + '"><strong><span>' + titIdx + '</span>'
				+ titSwtTxt + '</strong> - <span>' + chkItemIdx + '</span>' + chkSwtTxt + '<button class="btn-item-del"></button></li>');
				let swtItems = $(this).closest(swtParent).find('ul').children('li').get();
				swtItems.sort(function (a, b) {
					let swtLi = [$(a).text(), $(b).text()];
					return(swtLi[lastY] < swtLi[irNum[lastY]])? - irNum[lastY]:(swtLi[lastY] > swtLi[irNum[lastY]])?irNum[lastY]:lastY;
				});
				$.each(swtItems, function (index, row) {
					$(this).closest(swtParent).find('ul').append(row);
				});
				$('.btn-item-del').on('click', function () {
					const dataChkTxt = $(this).parent().attr('data-label');
					const chkCnt = $(this).closest('.switch-cont');
					const tarInp = chkCnt.find('.chk input');
					$(this).parent().remove();
					chkCnt.find('.chk span:contains(' + dataChkTxt + ')').parent().removeClass('on').find('input').prop('checked', false);
					chkLeng (tarInp);
				});
			} else {
				$(this).closest(swtParent).find('ul').find('li[data-label="' + thisTxt + '"]').remove();
			}
		});
		function chkLeng (target) {
			const tarSwtPrnt = target.closest(swtParent);
			const swtCntVal = [tarSwtPrnt.find('ul').height(), parseInt(tarSwtPrnt.find('ul').css('margin-top'))];
			const swtCntPd = parseInt(tarSwtPrnt.find('.switch-cont').css('padding-top'));
			if (tarSwtPrnt.find('.chk input:checked').length !== 0) {
				if (!tarSwtPrnt.find('.switch-cont').hasClass('active')) {
					tarSwtPrnt.find('.switch-cont').addClass('active').prepend('<div class="switch-item-list"><ul></ul></div>');
				}
				if (tarSwtPrnt.find('.chk input:checked').length >= 8) {
					tarSwtPrnt.find('.chk input:not(:checked)').prop('disabled', true);
				} else {
					tarSwtPrnt.find('.chk input:not(:checked)').prop('disabled', false);
				}
				tarSwtPrnt.addClass('on');
			} else {
				tarSwtPrnt.find('.switch-cont').removeClass('active');
				tarSwtPrnt.removeAttr('style').find('.switch-item-list').remove();
				tarSwtPrnt.removeClass('on');
			}
			if (tarSwtPrnt.hasClass('on')) {
				tarSwtPrnt.removeAttr('style');
				target.closest('.js-switch-outer.on:not(.active)').css('height', (swtCntVal[0]
				+ swtCntVal[1]) + (swtCntPd * irNum[1]));
			}
		}
	}

	designReview ();
	customSelect ();
</script>

</html>